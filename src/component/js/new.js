(function(d){d.fn.hap=function(c){function f(a){(function(a,e,m){var b=a.getElementsByTagName(e)[0];a.getElementById(m)||(a=a.createElement(e),a.id=m,a.src="//connect.facebook.net/en_US/sdk.js",b.parentNode.insertBefore(a,b))})(document,"script","facebook-jssdk");window.fbAsyncInit=function(){FB.init({appId:a,xfbml:!0,version:"v2.9"})}}function fa(a){if(n){if(!ta){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();ta=!0;P.on(J,function(a){a:{if("touchmove"==
a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();z(b)}}).on(ha,function(a){a:if(ta){ta=!1;P.off(J).off(ha);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=
a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();z(b)}})}return!1}}function z(a){ua?a=Xa.setProgress(a):(a=a.pageX-Ga.offset().left,0>a?a=0:a>K&&(a=K),a=Math.max(0,Math.min(1,a/K)));if(h&&ia)try{h.currentTime=a*h.duration}catch(b){console.log(b)}}function E(a){if(ua)b=Xa.trackTooltip(a),e=k[0].getBoundingClientRect(),m=Q[0].getBoundingClientRect(),a=parseInt(m.top-e.top-v.outerHeight()-10),g=parseInt(m.left-e.left-v.outerWidth()/2+Q.outerWidth()/
2);else{b=a.pageX-Ga.offset().left;if(!HAPUtils.isNumber(b))return!1;0>b?b=0:b>K&&(b=K);var b=Math.max(0,Math.min(1,b/K)),e=k[0].getBoundingClientRect(),m=Q[0].getBoundingClientRect(),g=parseInt(a.pageX-ja.scrollLeft()-e.left-v.outerWidth()/2);a=parseInt(m.top-e.top-5-v.outerHeight(),10)}g+v.outerWidth()>k.width()?g=k.width()-v.outerWidth():0>g&&(g=0);0>a+e.top&&(a=parseInt(m.top-e.top+v.outerHeight()+15));v.css({left:g+"px",top:a+"px"}).show();if(!HAPUtils.isNumber(b))return!1;h&&(e=h.duration,a=
b*e,HAPUtils.isNumber(a)&&HAPUtils.isNumber(e)&&v.find("p").html(HAPUtils.formatCurrentTime(a)+" / "+HAPUtils.formatDuration(e)))}function A(a){if(n){if(!va){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();va=!0;P.on(J,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;
else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();ka(b)}}).on(ha,function(a){a:if(va){va=!1;P.off(J).off(ha);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();ka(b)}})}return!1}}function B(){if(!n)return!1;0<w?(Ya=w,w=0):w=Ya;p()}function ka(a){X?
(w=Math.max(0,Math.min(1,(a.pageY-la.offset().top)/Y)),w=1-w):w=Math.max(0,Math.min(1,(a.pageX-la.offset().left)/Y));p()}function p(a){"undefined"!==typeof a&&(w=a);h&&(h.volume=w);Sb.css(X?"height":"width",w*Y+"px");0==w?Ha.find("i").removeClass("fa-volume-up fa-volume-down").addClass("fa-volume-off"):0<w&&.5>w?Ha.find("i").removeClass("fa-volume-off fa-volume-up").addClass("fa-volume-down"):Ha.find("i").removeClass("fa-volume-off fa-volume-down").addClass("fa-volume-up");d(l).trigger("volumeChange",
{instance:l,instanceName:F,volume:w})}function wa(a){var b=X?a.pageY-la.offset().top:a.pageX-la.offset().left;0>b?b=0:b>Y&&(b=Y);b=Math.max(0,Math.min(1,b/Y));if(!HAPUtils.isNumber(b))return!1;X&&(b=1-b);b=parseInt(100*b,10);v.find("p").text(b+" %");b=k[0].getBoundingClientRect();var e=R[0].getBoundingClientRect();if(X){var m=parseInt(e.left-b.left-v.outerWidth()/2+R.outerWidth()/2);a=parseInt(a.pageY-ja.scrollTop()-b.top-v.outerHeight()-10)}else m=parseInt(a.pageX-ja.scrollLeft()-b.left-v.outerWidth()/
2),a=parseInt(e.top-b.top-v.outerHeight());m+v.outerWidth()>k.width()?m=k.width()-v.outerWidth():0>m&&(m=0);0>a+b.top&&(a=parseInt(e.top-b.top+v.outerHeight()+15));v.css({left:m+"px",top:a+"px"}).show()}function Z(a){a.preventDefault();if(!n)return!1;a=d(a.currentTarget);if(y&&y.is(a))return!1;Za=!0;q.processPlaylistRequest(a.closest(".hap-playlist-item").index());d(l).trigger("clickPlaylistItem",{instance:l,instanceName:F})}function S(a){a.preventDefault();if(!n)return!1;a=d(a.currentTarget);if(y&&
y.is(a))return!1;a.removeClass("hap-playlist-non-selected").addClass("hap-playlist-selected");d(l).trigger("overPlaylistItem",{instance:l,instanceName:F,item:a})}function C(a){a.preventDefault();if(!n)return!1;a=d(a.currentTarget);if(y&&y.is(a))return!1;a.removeClass("hap-playlist-selected").addClass("hap-playlist-non-selected");d(l).trigger("outPlaylistItem",{instance:l,instanceName:F,item:a})}function ma(a){if(!n)return!1;a=d(a.currentTarget);if(a.hasClass("hap-prev-toggle"))l.previousMedia();else if(a.hasClass("hap-playback-toggle"))l.togglePlayback();
else if(a.hasClass("hap-next-toggle"))l.nextMedia();else if(a.hasClass("hap-volume-toggle"))B();else if(a.hasClass("hap-loop-toggle"))L=!L,q.setLooping(L),L?na.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):na.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color");else if(a.hasClass("hap-random-toggle"))M=!M,q.setRandom(M),M?oa.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):oa.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color");
else if(a.hasClass("hap-sort-alpha"))l.sort("title",pa);else if(a.hasClass("hap-popup-toggle"))hapOpenPopup(l,c);else if(a.hasClass("hap-share-toggle"))Tb.toggle();else if(a.hasClass("hap-share-item")){a=a.attr("data-type").toLowerCase();var b="https:"==window.location.protocol?"https:":"http:",e=(window.screen.width-600)/2,m=(window.screen.height-300)/2,g=t.title||"",lb=t.description||"",f=t.thumb||"",h=t.share||window.location.href,k;HAPUtils.relativePath(f)||(f=HAPUtils.qualifyURL(f));"facebook"==
a?window.FB&&FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":h,"og:title":g,"og:description":lb,"og:image":f}})}):"twitter"==a?k=b+"//twitter.com/share?url="+encodeURIComponent(h)+"&text="+encodeURIComponent(g):"googleplus"==a?k=b+"//plus.google.com/share?url="+encodeURIComponent(h):"tumblr"==a&&(k=b+"//www.tumblr.com/share/link?url="+encodeURIComponent(h)+"&amp;name="+encodeURIComponent(g)+"&amp;description="+encodeURIComponent(lb));k&&
window.open(k,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=600,height=300,left="+e+",top="+m)}}function xa(a){if(!n||va||ta)return!1;a=d(a.currentTarget).find("i");a.hasClass("hap-icon-color")&&a.removeClass("hap-icon-color").addClass("hap-icon-rollover-color")}function ya(a){if(!n)return!1;a=d(a.currentTarget);var b=a.find("i");a.hasClass("hap-random-toggle")&&M||a.hasClass("hap-loop-toggle")&&L||b.hasClass("hap-icon-rollover-color")&&b.removeClass("hap-icon-rollover-color").addClass("hap-icon-color")}
function Ia(){y&&(d(l).trigger("playlistItemEnabled",{instance:l,instanceName:F,item:y}),y.removeClass("hap-playlist-selected").addClass("hap-playlist-non-selected"),y=null)}function mb(a){T=!0;za.show();aa?$a():u.empty();var b=d(a);if(0==b.length)return alert("Failed playlist selection! Playlist - "+a+" does not exist. Check activePlaylist option in settings!"),nb(),!1;ab=a;d(l).trigger("playlistStartLoad",{instance:l,instanceName:F});if(void 0!=b.attr("data-type")&&"xml"==b.attr("data-type"))Ub(Ja(b));
else{var e,m,g;b.children(".hap-playlist-item").each(function(){m=d(this);g=m.attr("data-type");RegExp(/^audio$/).test(g)?H.push(m.clone()):RegExp(/^hls$/).test(g)?H.push(m.clone()):(e=Ja(m),H.push(e))});r=H.length;x()}}function x(){qa++;if(qa>r-1)Vb();else{var a=H[qa],b=a.type;b?RegExp(/^soundcloud$/).test(b)?(Aa=a.limit||200,N=[],ob?bb(a.path):Wb(a.path)):RegExp(/^podcast$/).test(b)?Xb(a):RegExp(/^itunes_podcast_music$/).test(b)?Yb(a):RegExp(/^folder$/).test(b)?Zb(a):/^gdrive-folder$/.test(b)?$b(a):
RegExp(/^audio$/).test(b)?(G.push(a),x()):RegExp(/^hls$/).test(b)&&(G.push(a),x()):(G.push(a),x())}}function Ja(a){var b={};b.origclasses=a.attr("class");b.type=a.attr("data-type");a.attr("data-hls")&&!HAPUtils.isEmpty(a.attr("data-hls"))&&(b.hls=a.attr("data-hls"));a.attr("data-mp3")&&!HAPUtils.isEmpty(a.attr("data-mp3"))&&(b.mp3=a.attr("data-mp3"));a.attr("data-wav")&&!HAPUtils.isEmpty(a.attr("data-wav"))&&(b.wav=a.attr("data-wav"));if("audio"==b.type){if(void 0!=a.attr("data-path")&&!HAPUtils.isEmpty(a.attr("data-path"))){var e=
a.attr("data-path"),m=e.substr(e.lastIndexOf(".")+1);"mp3"==m.toLowerCase()||"wav"==m.toLowerCase()?b[m.toLowerCase()]=e:b.mp3=e}}else void 0==a.attr("data-path")||HAPUtils.isEmpty(a.attr("data-path"))||(b.path=b.id=a.attr("data-path"));void 0!=a.attr("data-limit")&&!HAPUtils.isEmpty(a.attr("data-limit"))&&HAPUtils.isNumber(a.attr("data-limit"))&&0!=Math.abs(parseInt(a.attr("data-limit"),10))&&(b.limit=Math.abs(parseInt(a.attr("data-limit"),10)));void 0==a.attr("data-artwork")||HAPUtils.isEmpty(a.attr("data-artwork"))||
(b.artwork=a.data("artwork"));void 0==a.attr("data-thumb")||HAPUtils.isEmpty(a.attr("data-thumb"))?a.find(".hap-playlist-thumb img").length?b.thumb=a.find(".hap-playlist-thumb img").attr("src"):void 0==a.attr("data-thumb-default")||HAPUtils.isEmpty(a.attr("data-thumb-default"))||(b.thumbDefault=a.attr("data-thumb-default")):b.thumb=a.attr("data-thumb");void 0==a.attr("data-thumb-quality")||HAPUtils.isEmpty(a.attr("data-thumb-quality"))||(b.thumbQuality=a.attr("data-thumb-quality"));void 0==a.attr("data-title")||
HAPUtils.isEmpty(a.attr("data-title"))?a.find(".hap-playlist-title").length&&(b.title=a.find(".hap-playlist-title").html()):b.title=a.attr("data-title");void 0==a.attr("data-description")||HAPUtils.isEmpty(a.attr("data-description"))||(b.description=a.attr("data-description"));void 0==a.attr("data-artist")||HAPUtils.isEmpty(a.attr("data-artist"))||(b.artist=a.attr("data-artist"));void 0==a.attr("data-album")||HAPUtils.isEmpty(a.attr("data-album"))||(b.album=a.attr("data-album"));void 0==a.attr("data-download")||
HAPUtils.isEmpty(a.attr("data-download"))||(b.download=a.attr("data-download"));void 0!=a.attr("data-id3")&&(b.id3=!0);void 0==a.attr("data-start")||HAPUtils.isEmpty(a.attr("data-start"))||(b.start=Math.abs(a.attr("data-start")));void 0==a.attr("data-end")||HAPUtils.isEmpty(a.attr("data-end"))||(b.end=Math.abs(a.attr("data-end")));void 0!=a.attr("data-playback-rate")&&(b.playbackRate=1,HAPUtils.isEmpty(a.attr("data-playback-rate"))||(b.playbackRate=Math.abs(a.attr("data-playback-rate"))));void 0==
a.attr("data-link")||HAPUtils.isEmpty(a.attr("data-link"))||(b.link=a.attr("data-link"),b.target="_blank",void 0==a.attr("data-target")||HAPUtils.isEmpty(a.attr("data-target"))||(b.target=a.attr("data-target")));void 0==a.attr("data-share")||HAPUtils.isEmpty(a.attr("data-share"))||(b.share=a.attr("data-share"));a.is(":empty")||(b.content=a.html());return b}function Zb(a){if("file:"==window.location.protocol)return alert("Reading files from folders locally is not possible! This requires online server connection."),
x(),!1;var b=a.path.replace(/\/\//g,"/"),e=pb+"includes/folder_parser.php";a={dir:b};a.id3&&(cb=ba=G.length-1);d.ajax({type:"GET",url:e,data:a,dataType:"json"}).done(function(b){var e,m=b.length;var c=a.limit||500;var f=0,h=[],k=[];for(e=0;e<m;e++){var l=b[e];if(/mp3|mpeg|mpeg3|wav/.test(l.basename)){if(k.push(l),f++,f==c)break}else/jpg|jpeg|png/.test(l.basename)&&h.push(l)}HAPUtils.keysrt(k,"filename");HAPUtils.keysrt(h,"filename");m=k.length;for(e=0;e<m;e++)l=k[e],console.log(l),b=d.extend(!0,{},
a),b.type="audio",c=l.fullpath,b[l.extension]=c,delete b.path,!b.thumb&&h[e]&&(b.thumb=h[e].fullpath),"undefined"===typeof b.download&&(b.download=c),"undefined"===typeof b.share&&(b.share=c),b.title||(b.title=l.filename),G.push(b),ba++;a.id3?db():x()}).fail(function(a,b,e){console.log("Error processFolder: "+a,b,e);x()})}function $b(a){if("file:"==window.location.protocol)return alert("Reading files from folders locally is not possible! This requires online server connection."),x(),!1;if(HAPUtils.isEmpty(qb))return alert("gDriveAppId has not been set in settings!"),
x(),!1;d.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+a.path+"'+in+parents&key="+qb,dataType:"jsonp"}).done(function(b){var e,m=b.files.length,g=[],c=[];for(e=0;e<m;e++){var f=b.files[e];/mp3|mpeg|mpeg3|wav/.test(f.mimeType)?c.push(f):/jpg|jpeg|png/.test(f.mimeType)&&g.push(f)}HAPUtils.keysrt(c,"name");HAPUtils.keysrt(g,"name");m=c.length;for(e=0;e<m;e++){f=c[e];b=d.extend(!0,{},a);b.type="audio";var h=f.name.substr(f.name.lastIndexOf(".")+1);b[h.toLowerCase()]="https://drive.google.com/uc?export=view&id="+
f.id;delete b.path;"undefined"===typeof b.download&&(b.download="https://drive.google.com/uc?export=download&id="+f.id);"undefined"===typeof b.share&&(b.share="https://drive.google.com/open?id="+f.id);!b.thumb&&g[e]&&(b.thumb="https://drive.google.com/uc?export=view&id="+g[e].id);b.title||(b.title=f.name.substr(0,f.name.lastIndexOf(".")));G.push(b)}x()}).fail(function(a,e,m){console.log("Error processGdriveFolder: "+a,e,m);x()})}function db(){var a=G[ba];jsmediatags.read(a.mp3||a.wav,{onSuccess:function(b){var e=
b.tags;b=e.picture;e.artist&&(a.artist=e.artist);e.title&&(a.title=e.title);e.album&&(a.album=e.album);if(b){e="";var m,g=b.data.length;for(m=0;m<g;m++)e+=String.fromCharCode(b.data[m]);a.thumb="data:"+b.format+";base64,"+window.btoa(e)}ba--;ba>cb?db():x()},onError:function(a){console.log("ID3 error: ",a.type,a.info);ba--;ba>cb?db():x()}})}function Ub(a){d.ajax({type:"GET",url:a.path,dataType:"html"}).done(function(a){var b,m,g;d(a).children(".hap-playlist-item").each(function(){b=d(this);m=b.attr("data-type");
RegExp(/^audio/).test(m)?H.push(b):RegExp(/^hls/).test(m)?H.push(b):(g=Ja(b),H.push(g))});r=H.length;x()}).fail(function(a,e,m){console.log("Error processXml: "+a,e,m);x()})}function Xb(a){if("file:"==window.location.protocol)alert("Using Podcast locally is not possible! This requires online server connection!"),x();else{var b=pb+"includes/ba-simple-proxy.php?url="+encodeURIComponent(a.path);d.ajax({url:b,dataType:"json",cache:!1}).done(function(b){var e=HAPUtils.parseXML(b.contents),g,c,f,h=0,l=
a.limit||1E3;d(e).find("image").length&&d(e).find("image").attr("href")?f=d(e).find("image").attr("href"):d(b.contents).find("itunes\\:image").length&&d(b.contents).find("itunes\\:image").attr("href")&&(f=d(b.contents).find("itunes\\:image").attr("href"));d(e).find("item").each(function(){if(h>=l)return!1;g=d(this);c=d.extend(!0,{},a);c.type="audio";c.path=g.find("enclosure").attr("url");"undefined"===typeof c.download&&(c.download=c.path);!c.title&&g.find("title").length&&(c.title=g.find("title").text());
!c.artist&&g.find("author").length&&(c.artist=g.find("author").text());!c.description&&g.find("description").length&&(c.description=g.find("description").text());!c.duration&&g.find("duration").length&&(c.duration=g.find("duration").text());c.thumb||(g.find("image").length&&g.find("image").attr("href")?c.thumb=g.find("image").attr("href"):f&&(c.thumb=f));"undefined"===typeof c.share&&g.find("link").length&&(c.share=g.find("link").text());G.push(c);h++});x()}).fail(function(a,b,g){console.log("Error processPodcast: "+
a,b,g);x()})}}function Yb(a){"file:"==window.location.protocol?(alert("Using Podcast locally is not possible! This requires online server connection!"),x()):(encodeURIComponent(a.path),d.ajax({url:a.path}).done(function(b){b=d("<div></div>").html(b);var e,m,g,c=0,f=a.limit||500;if(b.find(".lockup.product.podcast").length){var h=b.find(".lockup.product.podcast").find("img");h.length&&(h.attr("src-swap-high-dpi").length?g=h.attr("src-swap-high-dpi"):h.attr("src-swap").length&&(g=h.attr("src-swap")))}b.find("tr.podcast-episode").each(function(){if(c>=
f)return!1;e=d(this);m=d.extend(!0,{},a);m.type="audio";m.path=e.attr("audio-preview-url");!m.title&&e.attr("preview-title").length&&(m.title=e.attr("preview-title"));!m.artist&&e.attr("preview-artist").length&&(m.artist=e.attr("preview-artist"));!m.description&&e.find(".episode-info").length&&(m.description=e.find(".episode-info").next().text());!m.thumb&&g&&(m.thumb=g);"undefined"===typeof m.share&&(m.share=a.path);G.push(m);c++});x()}).fail(function(a,e,m){console.log("Error processPodcast: "+
a,e,m);x()}))}function Wb(a){if("file:"==window.location.protocol)alert("Using SoundCloud locally is not possible! This requires online server connection!"),x();else{if(HAPUtils.isEmpty(eb))return alert("soundCloudAppId has not been set! Skipping Soundcloud url: "+a),x(),!1;var b=document.createElement("script");b.src="https://connect.soundcloud.com/sdk.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(b,e);var m=setInterval(function(){window.SC&&(m&&clearInterval(m),
SC.initialize({client_id:eb}),ob=!0,bb(a))},100)}}function bb(a){SC.get(a,{limit:200,linked_partitioning:1},function(a,e){if(e){for(console.log("Error getSoundCloudPage: "+e);N.length;)G.push(N.splice(0,1)[0]);x()}else{if("track"==a.kind)fb(a);else if("playlist"==a.kind){var b,g=a.tracks.length;if(N.length+g>=Aa){g=Aa-N.length;var c=!0}for(b=0;b<g;b++)fb(a.tracks[b],!0)}else if(a.collection)for(g=a.collection.length,N.length+g>=Aa&&(g=Aa-N.length,c=!0),b=0;b<g;b++)fb(a.collection[b],!0);if(a.next_href&&
!c)bb(a.next_href);else{for(;N.length;)G.push(N.splice(0,1)[0]);x()}}})}function fb(a){if(a.streamable&&a.stream_url){var b=d.extend(!0,{},H[qa]);b.type="audio";a.duration&&(b.duration=a.duration);b.path=a.stream_url+"?client_id="+eb;"undefined"===typeof b.download&&(a.downloadable&&a.download_url?b.download=b.path.replace(/\/stream\\?/,"/download"):delete b.download);!b.title&&a.title&&(b.title=a.title);!b.description&&a.description&&(b.description=a.description);!b.thumb&&a.artwork_url&&(b.thumb=
a.artwork_url,b.thumbQuality&&(b.thumb=b.thumb.replace("large.jpg",b.thumbQuality)));b.favoritingsCount=parseInt(a.favoritings_count?a.favoritings_count:0,10);b.playbackCount=parseInt(a.playback_count?a.playback_count:0,10);b.hotness=b.favoritingsCount+b.playbackCount;"undefined"===typeof b.share&&a.permalink_url&&(b.share=a.permalink_url);N.push(b)}}function Vb(){var a,b=G.length,e,c=0;for(a=0;a<b;a++){U&&c++;var g=G[a];var f=g.type;if(Ka){if(g instanceof d&&g.hasClass("hap-playlist-item")){f=g;
if(U){h?h.after(f):ca?f.appendTo(u):u.children("div").eq(I).before(f);var h=f}else f.appendTo(u);var k=f.find(".hap-playlist-non-selected, .hap-playlist-selected")}else{g.origclasses||(g.origclasses="hap-playlist-item");f=d('<div class="'+g.origclasses+'"/>').attr({"data-type":f});U?(h?h.after(f):ca?f.appendTo(u):u.children("div").eq(I).before(f),h=f):f.appendTo(u);k=d('<a class="hap-playlist-non-selected" href="#"/>').appendTo(f);if(-1!=d.inArray("thumb",rb)&&(e=g.thumb||g.thumbDefault)){var n=new Image;
n.className="hap-hidden";n.onload=function(){this.className="hap-visible"};n.src=e;d('<span class="hap-playlist-thumb"></span>').append(n).appendTo(k)}-1!=d.inArray("title",rb)&&(e=ac(g),d('<span class="hap-playlist-title">'+e+"</span>").appendTo(k));(g.path||g.mp3)&&f.attr({"data-mp3":g.path||g.mp3});g.hls&&f.attr({"data-hls":g.hls});g.description&&f.attr({"data-description":g.description});g.share&&f.attr({"data-share":g.share});bc&&g.link&&(e=d('<a class="hap-link" href="'+g.link+'" target="'+
g.target+'"><i class="fa fa-link"></i></a>'),k.after(e));console.log(sb,tb,g.download);sb&&tb&&g.download&&(e=d('<a class="hap-download" href="'+g.download+'" download title="Download"><i class="fa fa-download"></i></a>'),k.after(e));g.content&&(f.append(g.content),delete g.content)}g.thumb&&!g.artwork&&(g.artwork=[{src:g.thumb}]);k.on("click",Z);if(!O)k.on("mouseenter",S).on("mouseleave",C)}}aa=u;ub();console.log("playlistLength = ",r);U?(a=q.getCounter(),q.setPlaylistItems(r,!1),I<=a&&(ca||q.reSetCounter(a+
c)),Ba?(Ba=!1,Ca&&!O&&(da=!0),q.setCounter(I,!1)):Ca&&q.setCounter(I,!1)):q.setPlaylistItems(r);nb();d(l).trigger("playlistEndLoad",{instance:l,instanceName:F})}function ub(){r=u.children(".hap-playlist-item").length;if(Ka){var a=0,b,e,c,g;ea=[];u.find(".hap-playlist-item").each(function(){e=d(this).find(".hap-playlist-non-selected, .hap-playlist-selected");c=e.find(".hap-playlist-title");c.length&&(b=c.html(),ea.push(b),La&&(g=HAPUtils.formatNumber(a)+".  ",e.find(".hap-playlist-title-num").length?
e.find(".hap-playlist-title-num").html(g):c.before(d('<span class="hap-playlist-title-num">'+g+"</span>"))));a++})}}function vb(){if(Ka){var a=0,b,e;u.find(".hap-playlist-item").each(function(){b=d(this).find(".hap-playlist-non-selected, .hap-playlist-selected");e=HAPUtils.formatNumber(a)+".  ";b.find(".hap-playlist-title-num").length?b.find(".hap-playlist-title-num").html(e):title_node.before(d('<span class="hap-playlist-title-num">'+e+"</span>"));a++})}}function wb(){ra.mCustomScrollbar({axis:"horizontal"==
xb?"x":"y",theme:c.playlistScrollTheme,scrollInertia:0,mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){ra.find(".mCSB_container").addClass("hap-mCSB_full")},onOverflowY:function(){ra.find(".mCSB_container").removeClass("hap-mCSB_full")}}})}function nb(){za.hide();T=!1;n||(n=!0,gb&&!Da&&(wb(),Da=!0),yb(),p(w),c.autoOpenPopup&&!c.isPopup&&hapOpenPopup(l,c),d(l).trigger("setupDone",{instance:l,
instanceName:F}));zb&&!hb&&(u.sortable({update:function(a,e){if(y){var b=y.closest(".hap-playlist-item").index();q.reSetCounter(b)}La&&vb()}}),hb=!0);if(!ib&&!U&&0<r){var a=c.activeItem;a>r-1&&(a=r-1);-1<a&&q.setCounter(a,!1);ib=!0}U=!1}function cc(){var a=0,b,e,f;ea=[];u.find(".hap-playlist-item").each(function(){d(this).find(".hap-playlist-non-selected").each(function(){var c=d(this).on("click",Z);if(!O)c.on("mouseenter",S).on("mouseleave",C);e=c.find(".hap-playlist-title");e.length&&(b=e.html(),
ea.push(b),La&&(f=HAPUtils.formatNumber(a)+".  ",c.find(".hap-playlist-title-num").length?c.find(".hap-playlist-title-num").html(f):e.before(d('<span class="hap-playlist-title-num">'+f+"</span>"))))});a++});r=a;aa=u;n||(n=!0,gb&&!Da&&(wb(),Da=!0),p(w),c.autoOpenPopup&&!c.isPopup&&hapOpenPopup(l,c),d(l).trigger("setupDone",{instance:l,instanceName:F}));za.hide();T=!1;d(l).trigger("playlistEndLoad",{instance:l,instanceName:F});var g=c.activeItem;g>r-1&&(g=r-1);q.setPlaylistItems(r);-1<g&&q.setCounter(g,
!1)}function Ab(){Bb||(Ea=d(document.createElement("audio")).attr("preload",dc),h=Ea[0],Bb=!0);var a;Cb=a=Ma&&t.hls?t.hls:ec&&t.mp3?t.mp3:fc&&t.wav?t.wav:t.path;h.src=a;Ea.on("ended",function(){Db()}).on("canplay",function(a){}).on("canplaythrough",function(a){}).on("loadedmetadata",function(){t.playbackRate&&(h.playbackRate=Number(t.playbackRate));c.resumeTime?(h.currentTime=c.resumeTime,delete c.resumeTime):t.start&&(h.currentTime=t.start)}).on("play",function(){ia||(ia=!0,K=Ga.width(),sa&&cancelAnimationFrame(sa),
sa=requestAnimationFrame(Eb),d(l).trigger("soundStart",{instance:l,instanceName:F,counter:q.getCounter()}));if(gc&&1<hap_mediaArr.length){var a,e=hap_mediaArr.length;for(a=0;a<e;a++)l!=hap_mediaArr[a].inst&&hap_mediaArr[a].inst.pauseMedia()}Na.find("i").removeClass("fa-play").addClass("fa-pause");V=!0;d(l).trigger("soundPlay",{instance:l,instanceName:F,counter:q.getCounter()})}).on("pause",function(){Na.find("i").removeClass("fa-pause").addClass("fa-play");V=!1;d(l).trigger("soundPause",{instance:l,
instanceName:F,counter:q.getCounter()})}).on("error",function(a){d(l).trigger("soundError",{instance:l,instanceName:F,counter:q.getCounter()})});if(Ma&&"hls"==D){if("file:"==window.location.protocol)return alert("Playing HLS requires server connection!"),!1;W.attachMedia(h);da&&h.play()}else da&&(h.load(),h.play());h.volume=w;da=!0}function Eb(){if(h){var a=h.currentTime,b=h.duration;if(HAPUtils.isNumber(a)&&HAPUtils.isNumber(b)){Fb.html(HAPUtils.formatCurrentTime(a));Gb.html(HAPUtils.formatDuration(b));
if("undefined"!==typeof h.buffered&&0!=h.buffered.length){try{var e=h.buffered.end(h.buffered.length-1)}catch(g){}if(!isNaN(e))var c=e/b}ua?Xa.drawSeekbar(c,a,b):(Hb.width(a/b*K),c&&Ib.width(c*K));t.end&&a>=t.end&&Db()}}sa=requestAnimationFrame(Eb)}function Db(){d(l).trigger("soundEnd",{instance:l,instanceName:F,counter:q.getCounter()});var a=t.start||0;"next"==Oa?l.nextMedia():"loop"==Oa?(h.currentTime=a,h.play()):"rewind"==Oa?(h.currentTime=a,h.pause()):"stop"==Oa&&h.pause()}function Fa(){sa&&cancelAnimationFrame(sa);
Ma&&"hls"==D&&W.detachMedia();h&&(h.pause(),h.src="");Ea&&Ea.off("ended canplay canplaythrough loadedmetadata pause play error");Fb.html("0:00");Gb.html("0:00");Pa.empty();Jb.html("");Kb.html("");Hb.width(0);Ib.width(0);D=null;Ca=ia=V=!1;Na.find("i").removeClass("fa-pause").addClass("fa-play")}function $a(){D&&(Fa(),Ia());Ka&&u.find(".hap-playlist-item").remove();ab=aa=null;ib=Ba=U=!1;r=0;qa=-1;G=[];H=[];ea=[];q.reSetCounter();Lb.val(jb);pa=!1;Qa.find("i").removeClass("fa-sort-alpha-up").addClass("fa-sort-alpha-down")}
function yb(){K=Ga.width()}function ac(a){if("undefined"===typeof a.artist||HAPUtils.isEmpty(a.artist)||"undefined"===typeof a.title||HAPUtils.isEmpty(a.title))"undefined"!==typeof a.artist||"undefined"===typeof a.title||HAPUtils.isEmpty(a.title)?"undefined"===typeof a.artist||HAPUtils.isEmpty(a.artist)||"undefined"!==typeof a.title||(b=a.artist):b=a.title;else var b=a.artist+" - "+a.title;return b}function Mb(){if(Pa.length){var a=new Image;a.className="hap-hidden";a.onload=function(){this.className=
"hap-visible"};Pa.empty();Pa[0].appendChild(a);a.src=t.thumb}t.title&&Jb.html(t.title);t.artist&&Kb.html(t.artist)}if(function(){var a=!1,b=document.URL,e=b.indexOf("://")+3,c=b.indexOf("/",e);b=b.substring(e,c).split(".");e=[1728,653,969,1403];c=[];var f,d,h=b.length;for(f=0;f<h;f++){var k=b[f];var l=k.length;var n=d=0;for(d;d<l;d++){var p=k.charAt(d);n+=p.charCodeAt(0)}c.push(n)}f=0;h=c.length;l=e.length;f;a:for(;f<h;f++)for(d=0,d;d<l;d++)if(c[f]==e[d]){a=!0;break a}return a}()){var k=d(this),hc=
d(c.playlistList).hide(),ic=k.find(".hap-playlist-holder"),ra=k.find(".hap-playlist-inner"),u=k.find(".hap-playlist-content"),Nb=k.find(".hap-playlist-filter-msg"),Tb=k.find(".hap-share-holder"),Qa=k.find(".hap-sort-alpha"),za=k.find(".hap-preloader"),jc=k.find(".hap-popup-toggle");k.find(".hap-player-holder");var Pa=k.find(".hap-player-thumb"),Jb=k.find(".hap-player-title"),Kb=k.find(".hap-player-artist"),Fb=k.find(".hap-media-time-current"),Gb=k.find(".hap-media-time-total"),Na=k.find(".hap-playback-toggle"),
na=k.find(".hap-loop-toggle"),oa=k.find(".hap-random-toggle");za=k.find(".hap-preloader");var Ka=ic.length,O=HAPUtils.isMobile(),Ob=HAPUtils.hasLocalStorage(),pb=c.sourcePath,F=c.instanceName,ab=c.activePlaylist,dc=c.preload,da=c.autoPlay,L=c.loopingOn,M=c.randomPlay,La=c.useNumbersInPlaylist,gb=c.usePlaylistScroll,xb=c.playlistScrollOrientation,zb=O?!1:c.sortableTracks,Pb=c.facebookAppId,eb=c.soundCloudAppId,qb=c.gDriveAppId,w=c.volume,kc=c.useKeyboardNavigationForPlayback,Oa=c.mediaEndAction,rb=
c.playlistItemContent.split(","),lc=c.useContinousPlayback&&Ob,Ra=c.continousKey,Qb=c.useMediaSession&&"mediaSession"in navigator,tb=c.createDownloadIconsInPlaylist,bc=c.createLinkIconsInPlaylist,gc=c.togglePlaybackOnMultipleInstances,l=this,n,T;d("body");var ja=d(window),P=d(document),kb,sb=HAPUtils.hasDownloadSupport(),mc=HAPUtils.isIOS();HAPUtils.isAndroid();var ec=HAPUtils.canPlayMp3(),fc=HAPUtils.canPlayWav(),Ma=window.Hls&&Hls.isSupported(),ba,cb,Bb,Ea,h,ob,Aa,N=[],hb,Da,Za,ca,I,U,Ca,Ba,qa=
-1,G=[],H=[],r=0,ib,aa,y,ia,D,Cb,V,t,sa,pa,ea=[];"undefined"===typeof window.hap_mediaArr&&(window.hap_mediaArr=[]);window.hap_mediaArr.push({inst:l,id:F});O&&(c.autoPlay=!1);L&&na.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color");M&&oa.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color");k.find(".hap-select").change(function(){l.loadPlaylist(d(this).val())});var Lb=k.find(".hap-search-filter").on("focus",function(a){d(this).val()==jb&&d(this).val("")}).on("blur",
function(){HAPUtils.isEmpty(d(this).val())&&d(this).val(jb)}).on("keyup.apfilter",function(){if(0==ea.length)return!1;var a=d(this).val();a=ea.filter(/./.test.bind(new RegExp(a,"i")));var b,e=0;for(b=0;b<r;b++){var c=u.children(".hap-playlist-item").eq(b).find(".hap-playlist-title").html();-1<d.inArray(c,a)?u.children(".hap-playlist-item").eq(b).show():(u.children(".hap-playlist-item").eq(b).hide(),e++)}e==r?Nb.show():Nb.hide()}),jb=Lb.val();HAPUtils.isEmpty(Pb)?console.log("facebookAppId has not been set in settings!"):
f(Pb);var q=new HAPPlaylistManager(c);d(q).on("HAPPlaylistManager.COUNTER_READY",function(){D&&Fa();var a=q.getCounter(),b=u.children(".hap-playlist-item").eq(a);t=Ja(b);D=t.type;y&&Ia();y=u.children(".hap-playlist-item").eq(a).find(".hap-playlist-non-selected, .hap-playlist-selected");y.length&&(y.removeClass("hap-playlist-non-selected").addClass("hap-playlist-selected"),gb&&0<r&&(Za||("horizontal"==xb?ra.mCustomScrollbar("scrollTo",parseInt(y.closest(".hap-playlist-item").position().left),{scrollInertia:500}):
ra.mCustomScrollbar("scrollTo",parseInt(y.closest(".hap-playlist-item").position().top),{scrollInertia:500})),Za=!1),d(l).trigger("playlistItemDisabled",{instance:l,instanceName:F,item:y}));Mb();O&&(da=!0);Qb&&(navigator.mediaSession.metadata=new MediaMetadata({title:t.title,artist:t.artist||"",album:t.album||"",artwork:t.artwork}));Ab();d(l).trigger("soundRequest",{instance:l,instanceName:F,counter:a})});lc&&window.addEventListener(mc?"pagehide":"beforeunload",function(a){window.event.cancelBubble=
!0;if(!n||!D)return!1;a={volume:w,activeItem:q.getCounter(),resumeTime:l.getCurrentTime(),autoPlay:V};localStorage.setItem(Ra,JSON.stringify(a))});Qb&&(navigator.mediaSession.setActionHandler("play",function(){l.playMedia()}),navigator.mediaSession.setActionHandler("pause",function(){l.pauseMedia()}),navigator.mediaSession.setActionHandler("previoustrack",function(){l.previousMedia()}),navigator.mediaSession.setActionHandler("nexttrack",function(){l.nextMedia()}),navigator.mediaSession.setActionHandler("seekbackward",
function(){l.seekBackward()}),navigator.mediaSession.setActionHandler("seekforward",function(){l.seekForward()}));var v=k.find(".hap-tooltip");if(!O)k.find("[data-tooltip]").on("mouseenter",function(a){var b=d(this);a=k[0].getBoundingClientRect();var e=b[0].getBoundingClientRect();v.find("p").text(b.attr("data-tooltip"));var c=parseInt(e.top-a.top-v.outerHeight());b=parseInt(e.left-a.left-v.outerWidth()/2+b.outerWidth()/2);b+v.outerWidth()>k.width()?b=k.width()-v.outerWidth():0>b&&(b=0);0>c+a.top&&
(c=parseInt(e.top-a.top+v.outerHeight()+15));v.css({left:b+"px",top:c+"px"}).show()}).on("mouseleave",function(a){v.hide()});var ua=k.find(".hap-circle-player").length;if(ua&&HAPUtils.hasCanvas())var Xa=new HAPCirclePlayer({settings:c,parent:k});if("ontouchstart"in window){var Sa="touchstart.ap mousedown.ap";var J="touchmove.ap mousemove.ap";var ha="touchend.ap mouseup.ap"}else window.PointerEvent?(Sa="pointerdown.ap",J="pointermove.ap",ha="pointerup.ap"):(Sa="mousedown.ap",J="mousemove.ap",ha="mouseup.ap");
var ta,Ga=k.find(".hap-progress-bg"),Ib=k.find(".hap-load-level"),Hb=k.find(".hap-progress-level"),K,Q=ua?k.find(".hap-progress-canvas"):k.find(".hap-seekbar");Q.on(Sa,function(a){fa(a);return!1});if(!O){var Ta=function(){ia&&(Q.off(J,E).off("mouseout",Ta),P.off("mouseout",Ta),v.hide())};Q.on("mouseover",function(){ia&&(Q.on(J,E).on("mouseout",Ta),P.on("mouseout",Ta))})}var Ya=.5,va,Ha=k.find(".hap-volume-toggle"),R=k.find(".hap-volume-seekbar"),la=k.find(".hap-volume-bg"),Sb=k.find(".hap-volume-level"),
X=void 0!=R.attr("data-is-vertical")?!0:!1,Y=X?la.height():la.width();0>w?w=0:1<w&&(w=1);0!=w&&(Ya=w);R.on(Sa,function(a){A(a);return!1});if(!O){var Ua=function(){R.off(J,wa).off("mouseout",Ua);P.off("mouseout",Ua);v.hide()};R.on("mouseover",function(){R.on(J,wa).on("mouseout",Ua);P.on("mouseout",Ua)})}k.on("contextmenu",function(){return!1});if(kc)P.on("keyup.apnav",function(a){if(!n)return!1;var b=a.keyCode;a=d(a.target);if(37==b)l.previousMedia();else if(39==b)l.nextMedia();else if(32==b){if(a.hasClass("hap-search-filter"))return!1;
l.togglePlayback()}else if(77==b){if(a.hasClass("hap-search-filter"))return!1;B()}});var Rb=[k.find(".hap-next-toggle"),k.find(".hap-prev-toggle"),k.find(".hap-share-toggle"),k.find(".hap-playlist-toggle"),k.find(".hap-share-item"),Ha,jc,Qa,Na,na,oa],nc=Rb.length,Va;for(Va=0;Va<nc;Va++){var oc=d(Rb[Va]).css("cursor","pointer").on("click",ma);if(!O)oc.on("mouseenter",xa).on("mouseleave",ya)}if(Ma){var W=new Hls;W.on(Hls.Events.MEDIA_ATTACHED,function(){W.loadSource(Cb)});W.on(Hls.Events.ERROR,function(a,
b){if(b.fatal)switch(b.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");W.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");W.recoverMediaError();break;default:W.destroy()}})}ja.on("resize",function(){if(!n)return!1;kb&&clearTimeout(kb);kb=setTimeout(yb,150)});this.playMedia=function(){if(!n||!D||V)return!1;h&&h.play()};this.pauseMedia=function(){if(!n||!D||!V)return!1;h&&h.pause()};
this.checkMedia=function(a){if(!n||!D)return!1;a=a.toLowerCase();V&&"pause"==a&&h&&h.pause()};this.togglePlayback=function(){if(!n||!D)return!1;h&&(h.paused?h.play():h.pause())};this.nextMedia=function(){if(!n)return!1;0!=r&&q.advanceHandler(1,!0)};this.previousMedia=function(){if(!n)return!1;0!=r&&q.advanceHandler(-1,!0)};this.loadMedia=function(a){if(!n||T)return!1;if(0!=r){if("undefined"===typeof a)return alert("loadMedia method requires either a track number or a track title to load. LoadMedia failed."),
!1;if("string"===typeof a){var b;u.find(".hap-playlist-item").each(function(){if(d(this).find(".hap-playlist-title").html()==a)return a=d(this).index(),b=!0,!1});if(!b)return alert('Track with title "'+a+'" doesnt exist. LoadMedia failed.'),!1}else if("number"===typeof a){if(0>a||a>r-1)return alert('Invalid track number. Track number  "'+a+'" doesnt exist. LoadMedia failed.'),!1}else return alert("loadMedia method requires either a track number or a track title to load. LoadMedia failed."),!1;q.processPlaylistRequest(a)}};
this.loadPlaylist=function(a){if(!n||T)return!1;if("undefined"===typeof a||HAPUtils.isEmpty(a))return alert("loadPlaylist method requires id parameter. loadPlaylist failed."),!1;if(ab==a)return!1;mb(a)};this.addTrack=function(a,b,e,c){if(!n||T)return!1;if("undefined"===typeof a)return alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"===typeof b)return alert("addTrack method requires track parameter. AddTrack failed."),!1;Ca=!1;"undefined"!==typeof e&&(Ca=e);e=
1;var f=!1;if("string"!==typeof b&&"[object Object]"!==Object.prototype.toString.call(b))if("[object Array]"===Object.prototype.toString.call(b))e=b.length,f=!0;else return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;I=c;ca=!1;U=!0;if(aa)if("undefined"!==typeof I){if(0>I||I>r)return alert('Invalid position to insert track to. Position number "'+c+'" doesnt exist. AddTrack failed.'),!1;I==r&&(ca=!0)}else ca=!0,I=r;else{if("undefined"!==typeof I){if(0!=
I)return alert('Invalid position to insert track to. Position number "'+c+'" doesnt exist. AddTrack failed.'),!1}else I=0;ca=!0}T=!0;za.show();qa=-1;G=[];H=[];for(c=0;c<e;c++){var h=f?b[c]:b;h="html"==a?d(d.parseHTML(h)):h;H.push(h)}r=H.length;Ba=!1;aa||(Ba=!0);aa=u;x()};this.inputAudio=function(a){if(!n||T)return!1;if("undefined"===typeof a)return alert("inputAudio method requires data parameter. inputAudio failed."),!1;Ia();q.reSetCounter();t=a;D="audio";Mb();da=!0;Ab()};this.removeTrack=function(a){if(!n||
T)return!1;if(0!=r){if("undefined"===typeof a)return alert("removeTrack method requires id parameter. removeTrack failed."),!1;if("string"===typeof a){var b=!1;u.find(".hap-playlist-item").each(function(){if(d(this).find(".hap-playlist-title").html()==a)return c=d(this),a=c.index(),b=!0,!1});if(!b)return alert('Track with title "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else if("number"===typeof a){a=parseInt(a,10);if(0>a||a>r-1)return alert('Invalid id number. Track number  "'+a+'" doesnt exist. RemoveTrack failed.'),
!1;var c=u.find(".hap-playlist-item").eq(a)}else return alert("removeTrack method requires either a id number or a track title to remove. removeTrack failed."),!1;c.remove();ub();if(0<r){var f=q.getCounter();a==f?(Fa(),q.setPlaylistItems(r)):(q.setPlaylistItems(r,!1),a<f&&q.reSetCounter(q.getCounter()-1))}else $a()}};this.sort=function(a,b){if(!n)return!1;if(0!=r){if("undefined"===typeof a)return console.log("Sort method requires type parameter. Sort method failed."),!1;var c=a.toLowerCase();if("title"==
c)b?(u.children(".hap-playlist-item").sort(function(a,b){return d(b).find(".hap-playlist-title").html()>d(a).find(".hap-playlist-title").html()?1:-1}).appendTo(u),pa=!1):(u.children(".hap-playlist-item").sort(function(a,b){return d(b).find(".hap-playlist-title").html()<d(a).find(".hap-playlist-title").html()?1:-1}).appendTo(u),pa=!0);else if("random"==c){for(c=u.children();c.length;)u.append(c.splice(Math.floor(Math.random()*c.length),1));pa=!1}else return console.log("Sort method requires type parameter. Sort method failed."),
!1;pa?Qa.find("i").removeClass("fa-sort-alpha-up").addClass("fa-sort-alpha-down"):Qa.find("i").removeClass("fa-sort-alpha-down").addClass("fa-sort-alpha-up");y&&(c=y.closest(".hap-playlist-item").index(),q.reSetCounter(c));La&&vb()}};this.destroyInstance=function(){ja&&ja.off();R&&R.off();Q&&Q.off();Fa();l.destroyPlaylistScroll();zb&&(u.sortable("destroy"),hb=!1)};this.destroyMedia=function(){if(!n)return!1;n&&D&&(y&&Ia(),Fa(),q.reSetCounter())};this.destroyPlaylist=function(){if(!n)return!1;$a()};
this.setPlaybackRate=function(a){if(!n||!D)return!1;h&&(h.playbackRate=Number(a))};this.toggleRandom=function(a){if(!n||"undefined"===typeof q)return!1;M="undefined"!==typeof a?a:!M;q.setRandom(M);M?oa.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):oa.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color")};this.toggleLoop=function(a){if(!n||"undefined"===typeof q)return!1;L="undefined"!==typeof a?a:!L;q.setLooping(L);L?na.find("i").removeClass("hap-icon-color").addClass("hap-icon-rollover-color"):
na.find("i").removeClass("hap-icon-rollover-color").addClass("hap-icon-color")};this.getVolume=function(){return w};this.getVolumeSize=function(){return n?Y:!1};this.getVolumeOrientation=function(){return n?X:!1};this.setVolume=function(a){if(!n)return!1;0>a?a=0:1<a&&(a=1);p(a)};this.toggleMute=function(){if(!n)return!1;B()};this.seek=function(a){if(!n||!D)return!1;try{h.currentTime=a}catch(b){console.log(b)}};this.seekBackward=function(){if(!n||!D)return!1;if(h)try{h.currentTime=Math.max(h.currentTime-
10,0)}catch(a){console.log(a)}};this.seekForward=function(){if(!n||!D)return!1;if(h)try{h.currentTime=Math.min(h.currentTime+10,h.duration)}catch(a){console.log(a)}};this.getCurrentTime=function(){if(!n||!D)return!1;var a=0;h&&(a=h.currentTime);return a};this.getDuration=function(){if(!n||!D)return!1;if(h)var a=h.duration;return a};this.destroyPlaylistScroll=function(){if(!n)return!1;ra.mCustomScrollbar("destroy");Da=!1};this.getPlaylistList=function(){return n?hc:!1};this.getSetupDone=function(){return n};
this.getMediaPlaying=function(){return n?V:!1};this.getCounter=function(){return n?"undefined"!==typeof q?q.getCounter():-1:!1};this.getPlaylistLength=function(){return n?HAPUtils.isNumber(r)?r:0:!1};this.getSettings=function(){return c};this.getCurrMediaData=function(){return n?t:!1};this.getWrapper=function(){return k};this.getActivePlaylistItem=function(){return y};if(Ob&&localStorage.getItem(Ra)){var Wa=JSON.parse(localStorage.getItem(Ra));c.resumeTime=Wa.resumeTime;w=Wa.volume;da=Wa.autoPlay;
c.activeItem=Wa.activeItem;localStorage.removeItem(Ra)}c.activePlaylist&&!HAPUtils.isEmpty(c.activePlaylist)?mb(c.activePlaylist):cc();return this}}})(jQuery);
(function(d){var c=function(){};c.isEmpty=function(c){return 0==c.replace(/^\s+|\s+$/g,"").length};c.isNumber=function(c){return!isNaN(parseFloat(c))&&isFinite(c)};c.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)};c.isIE=function(){var c=-1;if("Microsoft Internet Explorer"==navigator.appName){var d=navigator.userAgent,z=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=z.exec(d)&&(c=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(d=navigator.userAgent,
z=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=z.exec(d)&&(c=parseFloat(RegExp.$1)));return-1!=c?!0:!1};c.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)};c.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")};c.hasDownloadSupport=function(){return"download"in document.createElement("a")};c.qualifyURL=function(c){var f=document.createElement("a");f.href=c;return f.href};c.relativePath=function(c){return/^(?:[a-z]+:)?\/\//i.test(c)};c.hasLocalStorage=function(){try{return"localStorage"in
d&&null!==d.localStorage}catch(f){return!1}};c.randomiseArray=function(c){var f=[],d=[],E;for(E=0;E<c;E++)f[E]=E;for(E=0;E<c;E++){var A=Math.round(Math.random()*(f.length-1));d[E]=f[A];f.splice(A,1)}return d};c.sortArray=function(c,d){var f,fa=c.length,A=[];for(f=0;f<fa;f++)A[f]=c[d[f]];return A};c.keysrt=function(c,d,z){var f=1;z&&(f=-1);return c.sort(function(c,z){var fa=c[d],p=z[d];return f*(fa<p?-1:fa>p?1:0)})};c.parseXML=function(c){if(d.ActiveXObject&&d.GetObject){var f=new ActiveXObject("Microsoft.XMLDOM");
f.loadXML(c);return f}if(d.DOMParser)return(new DOMParser).parseFromString(c,"text/xml");throw Error("No XML parser available");};c.formatCurrentTime=function(c){c=Math.round(c);var d=Math.floor(c/60);c=Math.floor(c%60);return(10<=d?d:""+d)+":"+(10<=c?c:"0"+c)};c.formatDuration=function(c){c=Math.round(c);var d=Math.floor(c/60);c=Math.floor(c%60);return(10<=d?d:""+d)+":"+(10<=c?c:"0"+c)};c.formatNumber=function(c){return 9>c?"0"+(c+1):c+1};c.nFormatter=function(c,d){var f=[{value:1E18,symbol:"E"},
{value:1E15,symbol:"P"},{value:1E12,symbol:"T"},{value:1E9,symbol:"G"},{value:1E6,symbol:"M"},{value:1E3,symbol:"k"}],E=/\.0+$|(\.[0-9]*[1-9])0+$/,A;for(A=0;A<f.length;A++)if(c>=f[A].value)return(c/f[A].value).toFixed(d).replace(E,"$1")+f[A].symbol;return c.toFixed(d).replace(E,"$1")};c.canPlayMp3=function(){var c=document.createElement("audio");return!(!c.canPlayType||!c.canPlayType("audio/mpeg;").replace(/no/,""))};c.canPlayWav=function(){var c=document.createElement("audio");return!(!c.canPlayType||
!c.canPlayType("audio/wav;").replace(/no/,""))};c.canPlayOgg=function(){var c=document.createElement("audio");return!(!c.canPlayType||!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""))};c.hasCanvas=function(){return!!document.createElement("canvas")};d.HAPUtils=c})(window);
(function(d,c){d.HAPPlaylistManager=function(d){function f(){C=HAPUtils.randomiseArray(B)}var z=this,E=d.loopingOn,A=d.randomPlay,B,ka=!1,p=-1,wa,Z,S=!1,C=[],ma=!1;this.setCounter=function(d,ya){"undefined"===typeof ya&&(ya=!0);p=ya?p+parseInt(d,10):parseInt(d,10);if(isNaN(p))alert("HAPPlaylistManager message: No active media, counter = "+p);else if(ka=!1,E){if(A)if(p>B-1){p=C[B-1];f();if(C[0]==p){var xa=C.splice(0,1);C.push(xa)}p=0;c(z).trigger("HAPPlaylistManager.PLAYLIST_END_ALERT")}else 0>p&&
(p=C[0],f(),C[B-1]==p&&(xa=C.splice(B-1,1),C.unshift(xa)),p=B-1);else p>B-1?(p=0,c(z).trigger("HAPPlaylistManager.PLAYLIST_END_ALERT")):0>p&&(p=B-1);c(z).trigger("HAPPlaylistManager.COUNTER_READY")}else p>B-1?(p=B-1,ka=!0):0>p&&(p=0),ka?c(z).trigger("HAPPlaylistManager.PLAYLIST_END"):c(z).trigger("HAPPlaylistManager.COUNTER_READY")};this.getCounter=function(){return A?ma?p:C[p]:p};this.advanceHandler=function(d){ma=!1;S?(S=!1,Z+d>B-1?(p=B-1,c(z).trigger("HAPPlaylistManager.COUNTER_READY")):0>Z+d?
(p=0,c(z).trigger("HAPPlaylistManager.COUNTER_READY")):z.setCounter(Z+d,!1)):z.setCounter(d)};this.processPlaylistRequest=function(c){ma=!1;A&&(ma=!0,wa=c,S||(Z=p,S=!0));z.setCounter(c,!1)};this.setPlaylistItems=function(c,d){"undefined"===typeof d&&(d=!0);d&&(p=-1);B=c;A&&f()};this.reSetCounter=function(c){"undefined"===typeof c?p=-1:(c=parseInt(c,10),B?(c>B-1?c=B-1:0>c&&(c=0),p=c):p=-1)};this.setRandom=function(c){(A=c)&&f();if(A){var d=C.length;for(c=0;c<d;c++)if(C[c]==p){if(0==c)break;c=C.splice(c,
1);C.unshift(parseInt(c,10));break}p=0}else S?(p=wa,S=!1):p=C[p]};this.setLooping=function(c){E=c};this.getPosition=function(c){return C.indexOf(c)}}})(window,jQuery);